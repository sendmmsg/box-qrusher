{% extends 'base.html' %}

{% block content %}
  <script>
    function printy() {
      var prtContent = document.getElementById("imageTarget");
      var WinPrint = window.open('', '', 'left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0');
      WinPrint.document.write(prtContent.innerHTML);
      WinPrint.document.close();
      WinPrint.focus();
      WinPrint.print();
      WinPrint.close();
    }
  </script>

  <div class="container">
    <form>
      <div class="form-group" id="filter-form" method="get">
        <label for="prefix">URL</label>
        <input type="text" name="prefix" class="form-control" id="prefix" aria-describedby="emailHelp" value="http://topo.fenrir-turtle.ts.net/q/">
        <small id="prefixHelp" class="form-text text-muted">URL to Box QRusher, including '/q/'</small>
      </div>
      <div class="form-group">
        <label for="startnum">Start from</>
        <input type="number" class="form-control" id="startnum" name="startnum" value="10">
      </div>
    </form>
    <button  hx-include="[name='prefix'],[name='startnum']" hx-get="/qrgen" class="btn btn-primary" hx-target="#imageTarget">View</button>
    <button class="btn btn-secondary" hx-on:click="printy();"> Print</button>
<!-- <button hx-get="/qrgen?prefix=apa&startnum=10" class="btn btn-primary" hx-target="#imageTarget">Fetch</button> -->

    <div class="img-fluid" id="imageTarget"/>
  </div>
  </div>

{% endblock content %}
